name: "Fitness Habit Tracker"
version: "0.1.0-ha.1"
slug: "fitness_habit_tracker"
description: "A simple habit tracker (Next.js + Prisma + SQLite) packaged as a Home Assistant add-on."
url: "https://github.com/rellerton/fitness-habit-tracker"

arch:
  - amd64

startup: services
boot: auto

# Pull prebuilt image (so HA does NOT try to build a Dockerfile in the add-on folder)
image: "ghcr.io/rellerton/fitness-habit-tracker"

ingress: true
ingress_port: 3000
panel_icon: mdi:checkbox-marked-circle-outline
panel_title: "Habit Tracker"
panel_admin: false

# Persisted storage (HA mounts /data for the add-on)
map:
  - type: data
    read_only: false

options:
  database_url: "file:/data/dev.db"

schema:
  database_url: str

# Pass env vars into the container
environment:
  DATABASE_URL: "%database_url%"
  NODE_ENV: "production"
